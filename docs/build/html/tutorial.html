<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html"><link rel="search" title="Search" href="search.html"><link rel="next" title="Missions" href="missions.html"><link rel="prev" title="Walkthrough" href="walkthrough.html">

    <!-- Generated with Sphinx 8.2.3 and Furo 2025.09.25 -->
        <title>Tutorial - Cecelia 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=580074bf" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=8dab3a3b" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Cecelia 0.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <span class="sidebar-brand-text">Cecelia 0.1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="walkthrough.html">Walkthrough</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="missions.html">Missions</a></li>
<li class="toctree-l1"><a class="reference internal" href="access_data_rmarkdown.html">Access data in RMarkdown</a></li>
<li class="toctree-l1"><a class="reference internal" href="create_custom_module.html">Create custom module</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_function_names.html">Module function names</a></li>
<li class="toctree-l1"><a class="reference internal" href="population_types.html">Population types</a></li>
<li class="toctree-l1"><a class="reference internal" href="input_widget_types.html">Input widget types</a></li>
<li class="toctree-l1"><a class="reference internal" href="others.html">Connecting other packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="_sources/tutorial.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="tutorial">
<span id="id1"></span><h1>Tutorial<a class="headerlink" href="#tutorial" title="Link to this heading">¶</a></h1>
<p>All data for the tutorial can be found <a class="reference external" href="https://unimelbcloud-my.sharepoint.com/:f:/g/personal/schienstock_d_unimelb_edu_au/EldU3lqBWk5JsvpZ0PfsUokBdEfBAssas9eL7S4P40wIWg?e=YV82bQ">here</a>.
<cite>Cecelia</cite> was designed to process <cite>static</cite> and <cite>live</cite> cell images.
Both approaches follow a similar workflow to process and analyse images:</p>
<ol class="arabic simple">
<li><p>Importing images as <a class="reference external" href="https://doi.org/10.1007/s00418-023-02209-1">OME-ZARR</a></p></li>
<li><p>Cleaning up images</p></li>
<li><p>Segmenting cells and structures</p></li>
<li><p>Creating populations</p></li>
<li><p>Extracting spatial properties</p></li>
<li><p>Creating figures</p></li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Going through these individual tutorials should take less than 1 h. The main routes are shown in <cite>pink</cite> while alternative options are shown in <cite>green</cite>.</p>
</div>
<section id="static-image">
<span id="tutorial-static"></span><h2>Static image<a class="headerlink" href="#static-image" title="Link to this heading">¶</a></h2>
<p>We will analyse <cite>M3c-Arm1_5-XCR1_Venus-B220_PB-LCMV_AF594-P14_CTDR-CD3e_AF700-1_Unmixing-crop.tif</cite> which is a cropped version of a cross-section from XCR1-Venus (dendritic cells) reporter mice after virus (LCMV) infection.</p>
<section id="create-a-project">
<h3>1. Create a project<a class="headerlink" href="#create-a-project" title="Link to this heading">¶</a></h3>
<blockquote>
<div><a class="reference internal image-reference" href="_images/st_create_project_ann.png"><img alt="_images/st_create_project_ann.png" src="_images/st_create_project_ann.png" style="width: 100%;" />
</a>
</div></blockquote>
</section>
<section id="import-the-image">
<h3>2. Import the image<a class="headerlink" href="#import-the-image" title="Link to this heading">¶</a></h3>
<blockquote>
<div><a class="reference internal image-reference" href="_images/st_import_images_ann.png"><img alt="_images/st_import_images_ann.png" src="_images/st_import_images_ann.png" style="width: 100%;" />
</a>
</div></blockquote>
</section>
<section id="define-channel-names">
<h3>3. Define channel names<a class="headerlink" href="#define-channel-names" title="Link to this heading">¶</a></h3>
<blockquote>
<div><p>The channels can be assigned one-by-one or as a list.</p>
<ul class="simple">
<li><p>B220-PB</p></li>
<li><p>XCR1-Venus</p></li>
<li><p>LCMV-AF594</p></li>
<li><p>P14-CTDR</p></li>
<li><p>CD3e-AF700</p></li>
<li><p>AF</p></li>
</ul>
<a class="reference internal image-reference" href="_images/st_add_channels_ann.png"><img alt="_images/st_add_channels_ann.png" src="_images/st_add_channels_ann.png" style="width: 100%;" />
</a>
</div></blockquote>
</section>
<section id="correct-autofluorescence">
<h3>4. Correct autofluorescence<a class="headerlink" href="#correct-autofluorescence" title="Link to this heading">¶</a></h3>
<blockquote>
<div><a class="reference internal image-reference" href="_images/st_pre_cleanup_ann.png"><img alt="_images/st_pre_cleanup_ann.png" src="_images/st_pre_cleanup_ann.png" style="width: 100%;" />
</a>
<p>Two-photon imaging often requires correction for autofluorescence and drift due to tissue movement. In <cite>Cecelia</cite> we implemented these methods individually but also in combination.</p>
<a class="reference internal image-reference" href="_images/st_post_cleanup_ann.png"><img alt="_images/st_post_cleanup_ann.png" src="_images/st_post_cleanup_ann.png" style="width: 100%;" />
</a>
</div></blockquote>
</section>
<section id="segment-cells">
<h3>5. Segment cells<a class="headerlink" href="#segment-cells" title="Link to this heading">¶</a></h3>
<blockquote>
<div><p>In <cite>Cecelia</cite> we can combine the segmentations of these different levels into one result to extract populations. To this end, the user has to ensure that all cells and structures are segmented as expected. We therefore recommend to first segment inidividual channels before combining these. <a class="reference external" href="http://www.cellpose.org/">Cellpose</a> is the main segmentation method utilised in <cite>Cecelia</cite>. Each segmentation must be given a Name. The name <cite>default</cite> must be given for the final segmentation while intermediate segmentation tests can have another name.</p>
<p>T and B cells have a similar size, roundish shape and are closely packed. These can be segmented using the <cite>cyto2</cite> model and a relatively small diameter of 5 μm.</p>
<a class="reference internal image-reference" href="_images/st_seg_t-bcells_ann.png"><img alt="_images/st_seg_t-bcells_ann.png" src="_images/st_seg_t-bcells_ann.png" style="width: 100%;" />
</a>
<p>XCR1<sup>+</sup> dendritic cells have very different shapes and contain a cytoplasmic reporter rather than a membrane binding antibody. We have trained a <cite>Cellpose</cite> model, <cite>ccia Fluorescent</cite>, which was trained on overlapping T cells with a fluorescent reporter from 2-photon imaging. This model can also segment irregularly shaped dendritic cells.</p>
<a class="reference internal image-reference" href="_images/st_seg_XCR1_ann.png"><img alt="_images/st_seg_XCR1_ann.png" src="_images/st_seg_XCR1_ann.png" style="width: 100%;" />
</a>
<p>The virus particles are also difficult to segment as they appear as separated yet closely cohesive patches of fluorescent signal. As these particles are so fragmented, we check <cite>Merge labels</cite> to merge touching segmentation labels.</p>
<a class="reference internal image-reference" href="_images/st_seg_LCMV_ann.png"><img alt="_images/st_seg_LCMV_ann.png" src="_images/st_seg_LCMV_ann.png" style="width: 100%;" />
</a>
<p>LCMV specific T cells were labelled with a cytoplasmic dye. Although these are technically T cells, it is better to segment them separately to capture all cells. As this signal is very bright, we can use the standard <cite>cyto2</cite> model.</p>
<a class="reference internal image-reference" href="_images/st_seg_P14_ann.png"><img alt="_images/st_seg_P14_ann.png" src="_images/st_seg_P14_ann.png" style="width: 100%;" />
</a>
<p>Now you can tick all the boxes with the individual segmentation parameters and give the name <cite>default</cite>. This will go through the segmentation from top to bottom, that is, the last segmentation will be on top of everything else.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For 3D images. If you require object measurements such as <cite>volume</cite>, then you must tick <cite>Extended Measurements</cite> in the <cite>Segmentation options</cite>.</p>
</div>
<a class="reference internal image-reference" href="_images/st_seg_all_ann.png"><img alt="_images/st_seg_all_ann.png" src="_images/st_seg_all_ann.png" style="width: 100%;" />
</a>
<p>To change the order, you can drag and drop the individual boxes.</p>
<a class="reference internal image-reference" href="_images/st_seg_sort_ann.png"><img alt="_images/st_seg_sort_ann.png" src="_images/st_seg_sort_ann.png" style="width: 100%;" />
</a>
</div></blockquote>
</section>
<section id="define-populations">
<h3>6. Define populations<a class="headerlink" href="#define-populations" title="Link to this heading">¶</a></h3>
<blockquote>
<div><p>Cell populations can be defined in various ways. One way is use <cite>sequential gating</cite>. Create a <cite>GatingSet</cite>.</p>
<a class="reference internal image-reference" href="_images/st_create_gating_set_ann.png"><img alt="_images/st_create_gating_set_ann.png" src="_images/st_create_gating_set_ann.png" style="width: 100%;" />
</a>
<p>Segmentation is not perfect, we can gate out objects that are small or have odd shapes by plotting <cite>volume</cite> vs <cite>surface-to-volume</cite>. After that, it depends on the specific context. There will be spillover between cells due to their proximity. It is therefore important to gate any populations that are sparse and closely associated with other cells first. The last population can be cells that are more abundant.</p>
<a class="reference internal image-reference" href="_images/st_gating_pops_ann.png"><img alt="_images/st_gating_pops_ann.png" src="_images/st_gating_pops_ann.png" style="width: 100%;" />
</a>
<p>The complete gating hierarchy can be visualised in the <cite>Flow Gating</cite> section of <cite>Plot canvas</cite>.</p>
<a class="reference internal image-reference" href="_images/st_gating_plot_ann.png"><img alt="_images/st_gating_plot_ann.png" src="_images/st_gating_plot_ann.png" style="width: 100%;" />
</a>
</div></blockquote>
</section>
<section id="extract-spatial-interactions">
<h3>7. Extract spatial interactions<a class="headerlink" href="#extract-spatial-interactions" title="Link to this heading">¶</a></h3>
<blockquote>
<div><p>In this example, we were interested in T cell clustering. In the <cite>Spatial analysis</cite> section are different methods to extract spatial interactions. We can utilise <cite>Cell clusters</cite> to extract LCMV specific cell clusters.</p>
<a class="reference internal image-reference" href="_images/st_cluster_detection_ann.png"><img alt="_images/st_cluster_detection_ann.png" src="_images/st_cluster_detection_ann.png" style="width: 100%;" />
</a>
<p>The abundance of these clusters can then be visualised in the <cite>Population plots</cite> section.</p>
<a class="reference internal image-reference" href="_images/st_cluster_plot_ann.png"><img alt="_images/st_cluster_plot_ann.png" src="_images/st_cluster_plot_ann.png" style="width: 100%;" />
</a>
</div></blockquote>
</section>
</section>
<section id="live-image">
<span id="tutorial-live"></span><h2>Live image<a class="headerlink" href="#live-image" title="Link to this heading">¶</a></h2>
<p>We will analyse <cite>M1-1-B6-naive-gBT-uGFP-OTI-CTV-P14-ubTomato-z300_0004-1.tif</cite> which is a two-photon movie of naive T cells within a mouse lymph node.</p>
<section id="id2">
<h3>1. Create a project<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<blockquote>
<div><a class="reference internal image-reference" href="_images/li_create_project_ann.png"><img alt="_images/li_create_project_ann.png" src="_images/li_create_project_ann.png" style="width: 100%;" />
</a>
</div></blockquote>
</section>
<section id="id3">
<h3>2. Import the image<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h3>
<blockquote>
<div><a class="reference internal image-reference" href="_images/li_import_images_ann.png"><img alt="_images/li_import_images_ann.png" src="_images/li_import_images_ann.png" style="width: 100%;" />
</a>
</div></blockquote>
</section>
<section id="id4">
<h3>3. Define channel names<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h3>
<blockquote>
<div><p>The channels can be assigned one-by-one or as a list.</p>
<ul class="simple">
<li><p>AF</p></li>
<li><p>P14-ubTomato</p></li>
<li><p>gBT-uGFP</p></li>
<li><p>OTI-CTV</p></li>
</ul>
<a class="reference internal image-reference" href="_images/li_add_channels_ann.png"><img alt="_images/li_add_channels_ann.png" src="_images/li_add_channels_ann.png" style="width: 100%;" />
</a>
</div></blockquote>
</section>
<section id="id5">
<h3>4. Correct autofluorescence<a class="headerlink" href="#id5" title="Link to this heading">¶</a></h3>
<blockquote>
<div><p>Autofluorescence correction in two-photon images requires subtraction of individual channels from each other. Drift correction is also commonly required to account for tissue movement during the imaging period. We implemented autofluorescence correction by diving channels from each other. Drift correction is at the moment a simple planar correction using scitkit-image’s <a class="reference external" href="https://scikit-image.org/docs/0.13.x/auto_examples/transform/plot_register_translation.html">cross-correlation</a>.</p>
<a class="reference internal image-reference" href="_images/li_cleanup_ann.png"><img alt="_images/li_cleanup_ann.png" src="_images/li_cleanup_ann.png" style="width: 100%;" />
</a>
<p>Comparison between original and corrected images.</p>
<div class="video_wrapper" style="padding-bottom: 56.250000%; padding-top: 30px; position: relative; width: 100%">
<iframe allowfullscreen="true" src="https://player.vimeo.com/video/926074249?loop=1&amp;autopause=0" style="border: 0; height: 100%; left: 0; position: absolute; top: 0; width: 100%">
</iframe></div></div></blockquote>
</section>
<section id="id6">
<h3>5. Segment cells<a class="headerlink" href="#id6" title="Link to this heading">¶</a></h3>
<blockquote>
<div><p>Segmentation works in a similar manner to static imaging. Again, we mostly rely on <a class="reference external" href="http://www.cellpose.org/">Cellpose</a>. For each cell population you must create a separate segmentation, ie/ P14, OTI and gBT cells will each have a separate segmentation. T cells can assume irregular shapes and various sizes and appear in tightly packed environments. While the <cite>cyto2</cite> model is very good for general segmentation, we found that or own <cite>Cellpose</cite> model, <cite>ccia Fluorescent</cite> sometimes works better to extract T cell shapes from these movies. However, this model can also pick a lot more background than <cite>cyto2</cite> depending on the image. We therefore recommend to try both and stick to the one that gives the best results for the current image.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For 3D images. If you require object measurements such as <cite>volume</cite>, then you must tick <cite>Extended Measurements</cite> in the <cite>Segmentation options</cite>.</p>
</div>
<a class="reference internal image-reference" href="_images/li_seg_gBT_ann.png"><img alt="_images/li_seg_gBT_ann.png" src="_images/li_seg_gBT_ann.png" style="width: 100%;" />
</a>
<div class="video_wrapper" style="padding-bottom: 56.250000%; padding-top: 30px; position: relative; width: 100%">
<iframe allowfullscreen="true" src="https://player.vimeo.com/video/926098606?loop=1&amp;autopause=0" style="border: 0; height: 100%; left: 0; position: absolute; top: 0; width: 100%">
</iframe></div></div></blockquote>
</section>
<section id="id8">
<h3>6. Define populations<a class="headerlink" href="#id8" title="Link to this heading">¶</a></h3>
<blockquote>
<div><p>We utilise <a class="reference external" href="https://github.com/quantumjot/btrack">btrack</a> to track the segmented cells. The most important parameter is the search radius to find connecting cells between frames. If the segmentation is not 100% clean (ie/ there is some autofluorescence segmented), then we can define a filter to exclude those autofluorescent objects.</p>
<a class="reference internal image-reference" href="_images/li_track_gBT_ann.png"><img alt="_images/li_track_gBT_ann.png" src="_images/li_track_gBT_ann.png" style="width: 100%;" />
</a>
<div class="video_wrapper" style="padding-bottom: 56.250000%; padding-top: 30px; position: relative; width: 100%">
<iframe allowfullscreen="true" src="https://player.vimeo.com/video/927004389?loop=1&amp;autopause=0" style="border: 0; height: 100%; left: 0; position: absolute; top: 0; width: 100%">
</iframe></div><p>The properties of the tracked cells can be plotted for different experimental conditions to, for example, compare cell <cite>speed</cite> or <cite>angle</cite>.</p>
<a class="reference internal image-reference" href="_images/li_track_stats_ann.png"><img alt="_images/li_track_stats_ann.png" src="_images/li_track_stats_ann.png" style="width: 100%;" />
</a>
</div></blockquote>
</section>
<section id="id9">
<h3>7. Extract spatial interactions<a class="headerlink" href="#id9" title="Link to this heading">¶</a></h3>
<blockquote>
<div><p>In this example, we were interested in the movement patterns of the different T cell types. One way we can analyse these behaviour modes is by utilising a Hidden Markov Model (<a class="reference external" href="https://www.rdocumentation.org/packages/depmixS4/versions/1.5-0">HMM</a>). These models can assign a pre-defined number of <cite>hidden</cite> states that are dependent on observed variables.</p>
<a class="reference internal image-reference" href="_images/li_track_hmm_ann.png"><img alt="_images/li_track_hmm_ann.png" src="_images/li_track_hmm_ann.png" style="width: 100%;" />
</a>
<div class="video_wrapper" style="padding-bottom: 56.250000%; padding-top: 30px; position: relative; width: 100%">
<iframe allowfullscreen="true" src="https://player.vimeo.com/video/927342248?loop=1&amp;autopause=0" style="border: 0; height: 100%; left: 0; position: absolute; top: 0; width: 100%">
</iframe></div></div></blockquote>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="missions.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Missions</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="walkthrough.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Walkthrough</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Dominik Schienstock
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Tutorial</a><ul>
<li><a class="reference internal" href="#static-image">Static image</a><ul>
<li><a class="reference internal" href="#create-a-project">1. Create a project</a></li>
<li><a class="reference internal" href="#import-the-image">2. Import the image</a></li>
<li><a class="reference internal" href="#define-channel-names">3. Define channel names</a></li>
<li><a class="reference internal" href="#correct-autofluorescence">4. Correct autofluorescence</a></li>
<li><a class="reference internal" href="#segment-cells">5. Segment cells</a></li>
<li><a class="reference internal" href="#define-populations">6. Define populations</a></li>
<li><a class="reference internal" href="#extract-spatial-interactions">7. Extract spatial interactions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#live-image">Live image</a><ul>
<li><a class="reference internal" href="#id2">1. Create a project</a></li>
<li><a class="reference internal" href="#id3">2. Import the image</a></li>
<li><a class="reference internal" href="#id4">3. Define channel names</a></li>
<li><a class="reference internal" href="#id5">4. Correct autofluorescence</a></li>
<li><a class="reference internal" href="#id6">5. Segment cells</a></li>
<li><a class="reference internal" href="#id8">6. Define populations</a></li>
<li><a class="reference internal" href="#id9">7. Extract spatial interactions</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=2709fde1"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=46bd48cc"></script>
    </body>
</html>